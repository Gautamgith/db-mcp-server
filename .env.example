# ===========================================
# HTTP Server Configuration
# ===========================================
MCP_SERVER_PORT=3000
MCP_SERVER_HOST=0.0.0.0
MCP_SERVER_PATH=/mcp

# ===========================================
# OAuth Configuration (EntraID/Azure AD)
# ===========================================
# Set to 'true' to enable OAuth authentication
OAUTH_ENABLED=false

# EntraID OAuth Configuration (required when OAUTH_ENABLED=true)
# Get these values from your Azure AD App Registration
OAUTH_ISSUER=https://login.microsoftonline.com/{tenant-id}/v2.0
OAUTH_AUDIENCE=api://{application-id}
OAUTH_JWKS_URI=https://login.microsoftonline.com/{tenant-id}/discovery/v2.0/keys
OAUTH_TOKEN_ALGORITHM=RS256
OAUTH_CLOCK_TOLERANCE=60

# EntraID Application Details
ENTRAID_TENANT_ID=your-tenant-id
ENTRAID_CLIENT_ID=your-client-id
ENTRAID_SCOPE=api://{application-id}/.default

# ===========================================
# Multi-Database Configuration (Recommended)
# ===========================================
# Configure multiple databases using JSON array
# Each database can have its own authentication method (IAM or standard)
# DATABASE_CONFIGS='[{"id":"prod","name":"Production DB","host":"prod-db.us-west-2.rds.amazonaws.com","port":5432,"database":"myapp","user":"myapp_user","useIAM":true,"awsRegion":"us-west-2","enabled":true},{"id":"staging","name":"Staging DB","host":"staging-db.us-west-2.rds.amazonaws.com","port":5432,"database":"myapp_staging","user":"myapp_user","useIAM":true,"awsRegion":"us-west-2","enabled":true}]'

# Set the default database to use (must match an ID from DATABASE_CONFIGS)
# DEFAULT_DATABASE_ID=prod

# ===========================================
# Legacy Single-Database Configuration
# ===========================================
# If DATABASE_CONFIGS is not set, these will be used for a single database
DB_HOST=your-rds-endpoint.region.rds.amazonaws.com
DB_PORT=5432
DB_NAME=your_database_name
DB_USER=your_iam_username

# AWS Configuration (for IAM authentication)
AWS_REGION=us-west-2

# Authentication Method (for legacy config only)
# Set to 'true' to use IAM authentication, 'false' for standard auth
USE_IAM_AUTH=false

# MCP Configuration
MCP_SERVER_NAME=postgresql-mcp
MCP_SERVER_VERSION=1.0.0

# Logging Configuration
LOG_LEVEL=info
LOG_FORMAT=json

# Development Configuration
NODE_ENV=production

# Connection Pool Configuration
DB_POOL_MAX=10
DB_POOL_MIN=2
DB_POOL_IDLE_TIMEOUT=30000
DB_POOL_CONNECTION_TIMEOUT=5000

# Query Configuration
DEFAULT_QUERY_LIMIT=100
MAX_QUERY_LIMIT=1000
QUERY_TIMEOUT=30000

# IAM Authentication Settings (only used when USE_IAM_AUTH=true)
# IAM_ROLE_ARN=arn:aws:iam::account-id:role/your-rds-role
# TOKEN_REFRESH_BUFFER_MINUTES=2

# Security Configuration
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW_MS=60000
MAX_QUERY_SIZE=10000
MAX_QUERY_COMPLEXITY_SCORE=20